// @ts-nocheck
document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("poll-form"),t=document.getElementById("poll-results"),n="http://127.0.0.1:5000/api";async function i(){return(await fetch(`${n}/votes`)).json()}function s(e){const t=e.speed+e.design+e.visibility;if(0===t)return;const n={speed:Math.round(e.speed/t*100),design:Math.round(e.design/t*100),visibility:Math.round(e.visibility/t*100)},i=Math.max(n.speed,n.design,n.visibility),s={speed:document.getElementById("speed-bar"),design:document.getElementById("design-bar"),visibility:document.getElementById("visibility-bar")},d={speed:document.getElementById("speed-percentage"),design:document.getElementById("design-percentage"),visibility:document.getElementById("visibility-percentage")};for(const[e,t]of Object.entries(n))s[e].style.width=`${t}%`,d[e].textContent=`${t}%`,s[e].style.backgroundColor=t===i?"#4caf50":"#f44336"}e.addEventListener("submit",(async function(t){t.preventDefault();const d=new FormData(e).get("vote");if(d){await async function(e){await fetch(`${n}/vote`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({option:e})})}(d),e.style.display="none";s(await i())}})),async function(){s(await i()),t.style.display="block"}()}));